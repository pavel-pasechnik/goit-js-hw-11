{"version":3,"file":"commonHelpers.js","sources":["../src/main.js"],"sourcesContent":["'use strict';\n\n// Описаний у документації\nimport iziToast from 'izitoast';\n// Додатковий імпорт стилів\nimport 'izitoast/dist/css/iziToast.min.css';\n// Описаний у документації\nimport SimpleLightbox from 'simplelightbox';\n// Додатковий імпорт стилів\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst input = document.querySelector('.search-input');\nconst form = document.querySelector('.search-form');\nconst ul = document.querySelector('.images-list');\nconst divGallery = document.querySelector('.gallery');\n\n// Створення нового елементу для завантажувача\nconst loaderElement = document.createElement('span');\nloaderElement.className = 'loader is-hidden';\n\n// Додавання завантажувача до списку\ndivGallery.append(loaderElement);\n\nconst loaderClass = document.querySelector('.loader');\n\nconst BASE_URL = new URL('https://pixabay.com/api/');\nconst KEY = '41487030-c0d4f2e8fae3a5e9414bad560';\n\n// Ініціалізація SimpleLightbox один раз поза обробником подій\nconst lightbox = new SimpleLightbox('.gallery a', {\n  captionsData: 'alt',\n  captionDelay: '250',\n});\n\nform.addEventListener('submit', listener => {\n  listener.preventDefault();\n  // Переключення видимості завантажувача\n  loaderClass.classList.remove('is-hidden');\n\n  const query = listener.currentTarget.elements.query.value;\n\n  BASE_URL.searchParams.append('key', KEY);\n  BASE_URL.searchParams.append('q', query);\n  BASE_URL.searchParams.append('image_type', 'photo');\n  BASE_URL.searchParams.append('orientation', 'horizontal');\n  BASE_URL.searchParams.append('safesearch', 'true');\n\n  fetch(BASE_URL)\n    .then(response => {\n      if (!response.ok) {\n        throw new Error(response.status);\n      }\n      // Очищення параметрів запиту\n      BASE_URL.searchParams.delete('key');\n      BASE_URL.searchParams.delete('q');\n      BASE_URL.searchParams.delete('image_type');\n      BASE_URL.searchParams.delete('orientation');\n      BASE_URL.searchParams.delete('safesearch');\n      //\n      return response.json();\n    })\n    .then(images => {\n      input.value = '';\n      // Приховання завантажувача після отримання результатів\n      loaderClass.classList.add('is-hidden');\n      if (images.hits.length === 0) {\n        throw new Error(error);\n      }\n      ul.innerHTML = images.hits.reduce(\n        (html, img) =>\n          html +\n          `\n          <li class=\"images-item\">\n            <a class=\"images-link\" href=\"${img.largeImageURL}\"><img class=\"images\" data-source=\"${img.largeImageURL}\" alt=\"${img.tags}\" src=\"${img.webformatURL}\" width=\"360\" height=\"200\"></a>\n            <div class=\"description\">\n            <div>\n            <p><b>Likes</b></p>\n            <p>${img.likes}</p>\n            </div>\n            <div>\n            <p><b>Views</b></p>\n            <p>${img.views}</p>\n            </div>\n            <div>\n            <p><b>Comments</b></p>\n            <p>${img.comments}</p>\n            </div>\n           <div>\n           <p><b>Downloads</b></p>\n           <p>${img.downloads}</p>\n           </div>\n            </div>\n          </li>\n            `,\n        ''\n      );\n      // Виклик методу для оновлення галереї\n      lightbox.refresh();\n    })\n    .catch(error => {\n      ul.innerHTML = '';\n      input.value = '';\n\n      error = iziToast.show({\n        title: '',\n        message:\n          'Sorry, there are no images matching your search query. Please try again!',\n        messageColor: '#FFFFFF',\n        backgroundColor: '#EF4040',\n        color: '#B51B1B',\n        iconUrl: './bi_x-octagon.svg',\n        iconColor: '#FAFAFB',\n        position: 'topRight',\n      });\n    });\n});\n"],"names":["input","form","ul","divGallery","loaderElement","loaderClass","BASE_URL","KEY","lightbox","SimpleLightbox","listener","query","response","images","html","img","error","iziToast"],"mappings":"6vBAWA,MAAMA,EAAQ,SAAS,cAAc,eAAe,EAC9CC,EAAO,SAAS,cAAc,cAAc,EAC5CC,EAAK,SAAS,cAAc,cAAc,EAC1CC,EAAa,SAAS,cAAc,UAAU,EAG9CC,EAAgB,SAAS,cAAc,MAAM,EACnDA,EAAc,UAAY,mBAG1BD,EAAW,OAAOC,CAAa,EAE/B,MAAMC,EAAc,SAAS,cAAc,SAAS,EAE9CC,EAAW,IAAI,IAAI,0BAA0B,EAC7CC,EAAM,qCAGNC,EAAW,IAAIC,EAAe,aAAc,CAChD,aAAc,MACd,aAAc,KAChB,CAAC,EAEDR,EAAK,iBAAiB,SAAUS,GAAY,CAC1CA,EAAS,eAAc,EAEvBL,EAAY,UAAU,OAAO,WAAW,EAExC,MAAMM,EAAQD,EAAS,cAAc,SAAS,MAAM,MAEpDJ,EAAS,aAAa,OAAO,MAAOC,CAAG,EACvCD,EAAS,aAAa,OAAO,IAAKK,CAAK,EACvCL,EAAS,aAAa,OAAO,aAAc,OAAO,EAClDA,EAAS,aAAa,OAAO,cAAe,YAAY,EACxDA,EAAS,aAAa,OAAO,aAAc,MAAM,EAEjD,MAAMA,CAAQ,EACX,KAAKM,GAAY,CAChB,GAAI,CAACA,EAAS,GACZ,MAAM,IAAI,MAAMA,EAAS,MAAM,EAGjC,OAAAN,EAAS,aAAa,OAAO,KAAK,EAClCA,EAAS,aAAa,OAAO,GAAG,EAChCA,EAAS,aAAa,OAAO,YAAY,EACzCA,EAAS,aAAa,OAAO,aAAa,EAC1CA,EAAS,aAAa,OAAO,YAAY,EAElCM,EAAS,MACtB,CAAK,EACA,KAAKC,GAAU,CAId,GAHAb,EAAM,MAAQ,GAEdK,EAAY,UAAU,IAAI,WAAW,EACjCQ,EAAO,KAAK,SAAW,EACzB,MAAM,IAAI,MAAM,KAAK,EAEvBX,EAAG,UAAYW,EAAO,KAAK,OACzB,CAACC,EAAMC,IACLD,EACA;AAAA;AAAA,2CAEiCC,EAAI,mDAAmDA,EAAI,uBAAuBA,EAAI,cAAcA,EAAI;AAAA;AAAA;AAAA;AAAA,iBAIlIA,EAAI;AAAA;AAAA;AAAA;AAAA,iBAIJA,EAAI;AAAA;AAAA;AAAA;AAAA,iBAIJA,EAAI;AAAA;AAAA;AAAA;AAAA,gBAILA,EAAI;AAAA;AAAA;AAAA;AAAA,cAKZ,EACR,EAEMP,EAAS,QAAO,CACtB,CAAK,EACA,MAAMQ,GAAS,CACdd,EAAG,UAAY,GACfF,EAAM,MAAQ,GAENiB,EAAS,KAAK,CACpB,MAAO,GACP,QACE,2EACF,aAAc,UACd,gBAAiB,UACjB,MAAO,UACP,QAAS,qBACT,UAAW,UACX,SAAU,UAClB,CAAO,CACP,CAAK,CACL,CAAC"}